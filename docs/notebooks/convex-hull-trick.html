<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="author" content="Stewart Park" />
    <meta name="keywords" content="algorithms,announcement,convex hull trick,static website generator" />
    <title>What is the Convex Hull Trick? | Stewart Park's Blog</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <style type="text/css">
     html, body, .screen { height: 100%; }
     .screen { margin-left: 280px; }
     .nav {
       position: fixed;
       left: 0;
       height: 100%;
       width: 280px;
       padding: 30px;
       background-color: white;
       box-shadow: inset -5px 0 10px -5px rgba(0,0,0,0.6);
     }
     .nav .info { text-align: center; width: 100%;  height: auto; }
     .nav .info .me {
       margin: 30px 0 15px 0;
       width: 150px;
       height: 150px;
       border-radius: 150px;
     }
     .nav .info .name {
       font-size: 1.5rem;
       font-weight: bold;
       color: black;
       text-decoration: none;
     }
     .nav .info .bio {
       font-size: 0.875rem;
     }

     @media (max-width: 992px) {
       .screen { margin-left: 0; }
       .nav { width: 100%; height: auto; position: unset; }
     }

     .header {
       width: 100%;
       display: block;
       margin: 0;
       height: 200px;
     }
     .header img {
       width: 100%;
       height: 200px;
       object-fit: cover;
     }
     .header .title {
       position: relative;
       top: -50px;
       color: white;
       text-shadow: 2px 2px #000;
       font-size: 2rem;
       padding-left: 20px;
     }
    </style>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  </head>
  <body>
    <div class="screen">
      <div class="nav">
        <div class="info">
          <a href="/">
            <div class="name">Stewart's Blog</div>
            <img src="https://avatars2.githubusercontent.com/u/388348" class="me" alt="" />
          </a>
          <div class="bio">
            <p>I'm Stewart Park, a self-taught software engineer, and this is where I write about random stuff.</p>
            <a href="/">Notebooks</a>
            |
            <a href="https://github.com/stewartpark" target="_blank">Github</a>
            |
            <a href="https://www.linkedin.com/in/hellojyp/" target="_blank">LinkedIn</a>
          </div>
        </div>
        <div class="tags">
          <div class="title">Tags</div>
          
          <a href="/tags/algorithms.html">algorithms</a>
          
          <a href="/tags/announcement.html">announcement</a>
          
          <a href="/tags/convex hull trick.html">convex hull trick</a>
          
          <a href="/tags/static website generator.html">static website generator</a>
          
        </div>
      </div>
      <div class="content">
        
<script type="text/x-mathjax-config">
 MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});
</script>
<link rel="stylesheet" type="text/css" href="https://rawgit.com/richleland/pygments-css/master/friendly.css" />
<script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<style type="text/css">
 .cell .input, .cell .output_area { display: flex; flex-wrap: nowrap; }
 .cell .prompt { flex-basis: 70px; min-width: 70px; text-align: right; padding-right: 10px; font-family: monospace; }
 .cell .inner_cell { flex-basis: auto; width: 100%; }
 .cell .output_html { width: auto; }

 .cell .input .prompt { color: #303F9F; }
 .cell .output_area .prompt { color: #D84315; }

 .celltag_hidden { display: none; }
 .celltag_input_hidden > .input { display: none; }
 .celltag_output_hidden > .output_wrapper { display: none; }
 .notebook {
   padding: 20px;
 }
 #disqus_thread { margin: 20px; }
</style>
<a class="header" href="/notebooks/convex-hull-trick.html">
  <img src="https://i.imgur.com/8Xb6NSb.png" alt="What is the Convex Hull Trick?" />
  <div class="container">
    <div class="title">What is the Convex Hull Trick? (2020-06-14)</div>
  </div>
</a>
<div class="notebook">
  <div class="container">
    <div class="cell border-box-sizing code_cell rendered celltag_hidden">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># TITLE: What is the Convex Hull Trick?</span>
<span class="c1"># COVER: https://i.imgur.com/8Xb6NSb.png</span>
<span class="c1"># DATE: 2020-06-14</span>
<span class="c1"># TAGS: algorithms,convex hull trick</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="k">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="k">import</span> <span class="n">lru_cache</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>/home/stewart/.pyenv/versions/3.7.5/lib/python3.7/site-packages/pandas/compat/__init__.py:117: UserWarning: Could not import the lzma module. Your installed Python is incomplete. Attempting to use lzma compression will result in a RuntimeError.
  warnings.warn(msg)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I had a chance to poke at a hard algorithm problem recently and miserably failed. This bothered me for quite some time and someone told me that the problem I was struggling with can be easily solved with something advanced I've only heard of: the convex hull trick. So I decided to learn this. But it seems like to me that every material I can find on the internet assumes someone who's pretty already knowledgeable in this whole algorithm stuff. So here's my version of understanding—working knowledge, if you will. If you want to skip the problem part and get to the explanation of the convex hull trick, please click <a href="#The-convex-hull-trick">here</a>.</p>
<h2 id="The-problem-that-broke-me:-APIO10A-Commando">The problem that broke me: APIO10A Commando<a class="anchor-link" href="#The-problem-that-broke-me:-APIO10A-Commando">&#182;</a></h2><p>The problem I was looking at was in Korean on a Korean website, but this is the same problem in English: <a href="https://www.spoj.com/problems/APIO10A/">Link</a></p>
<p>Basically, the gist of the problem is that you have an array of integers ($1 \leq x_i \leq100$) like below:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered celltag_input_hidden">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">x</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[2]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2, 2, 3, 4)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The number of integers can go up to 1,000,000, but the above example is just 4 integers.</p>
<p>Your goal here is to slice the above array so that the adjusted sum of each slice of the array is the greatest. You adjust the sum by plugging $f(x) = ax^2+bx+c$ in, where $a$, $b$, $c$ are given from the input. ($-5 \leq a \leq -1$, $|b| \leq 10,000,000$, $|c| \leq 10,000,000$)</p>
<p>Let $a=-1$, $b=10$, $c=-20$. The following happens to get the answer:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered celltag_input_hidden">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_all_combinations</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="n">rst</span> <span class="o">=</span> <span class="p">[[</span><span class="n">x</span><span class="p">]]</span> 
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">get_all_combinations</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">:]):</span>
            <span class="n">rst</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">[:</span><span class="n">i</span><span class="p">]]</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">rst</span>

<span class="k">def</span> <span class="nf">get_adjusted_sum</span><span class="p">(</span><span class="n">xs</span><span class="p">):</span>
    <span class="n">S</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xs</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">S</span> <span class="o">+=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">s</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">s</span> <span class="o">+</span> <span class="n">c</span>
    <span class="k">return</span> <span class="n">S</span>
    
<span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">(</span><span class="n">x_</span><span class="p">,</span> <span class="n">get_adjusted_sum</span><span class="p">(</span><span class="n">x_</span><span class="p">))</span> 
        <span class="k">for</span> <span class="n">x_</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">get_all_combinations</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="p">],</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Slice Combination&quot;</span><span class="p">,</span> <span class="s2">&quot;Adjusted Sum&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="k">def</span> <span class="nf">hl</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,)]</span> <span class="ow">or</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;color: red&#39;</span>
    <span class="k">return</span> <span class="s1">&#39;color: unset&#39;</span>
<span class="n">df</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">applymap</span><span class="p">(</span><span class="n">hl</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[3]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<style  type="text/css" >
    #T_86d8c042_ae30_11ea_8129_d0c637cc6861row0_col0 {
            color:  unset;
        }    #T_86d8c042_ae30_11ea_8129_d0c637cc6861row0_col1 {
            color:  unset;
        }    #T_86d8c042_ae30_11ea_8129_d0c637cc6861row1_col0 {
            color:  unset;
        }    #T_86d8c042_ae30_11ea_8129_d0c637cc6861row1_col1 {
            color:  unset;
        }    #T_86d8c042_ae30_11ea_8129_d0c637cc6861row2_col0 {
            color:  unset;
        }    #T_86d8c042_ae30_11ea_8129_d0c637cc6861row2_col1 {
            color:  unset;
        }    #T_86d8c042_ae30_11ea_8129_d0c637cc6861row3_col0 {
            color:  unset;
        }    #T_86d8c042_ae30_11ea_8129_d0c637cc6861row3_col1 {
            color:  unset;
        }    #T_86d8c042_ae30_11ea_8129_d0c637cc6861row4_col0 {
            color:  unset;
        }    #T_86d8c042_ae30_11ea_8129_d0c637cc6861row4_col1 {
            color:  unset;
        }    #T_86d8c042_ae30_11ea_8129_d0c637cc6861row5_col0 {
            color:  unset;
        }    #T_86d8c042_ae30_11ea_8129_d0c637cc6861row5_col1 {
            color:  unset;
        }    #T_86d8c042_ae30_11ea_8129_d0c637cc6861row6_col0 {
            color:  red;
        }    #T_86d8c042_ae30_11ea_8129_d0c637cc6861row6_col1 {
            color:  red;
        }    #T_86d8c042_ae30_11ea_8129_d0c637cc6861row7_col0 {
            color:  unset;
        }    #T_86d8c042_ae30_11ea_8129_d0c637cc6861row7_col1 {
            color:  unset;
        }</style><table id="T_86d8c042_ae30_11ea_8129_d0c637cc6861" ><thead>    <tr>        <th class="blank level0" ></th>        <th class="col_heading level0 col0" >Slice Combination</th>        <th class="col_heading level0 col1" >Adjusted Sum</th>    </tr></thead><tbody>
                <tr>
                        <th id="T_86d8c042_ae30_11ea_8129_d0c637cc6861level0_row0" class="row_heading level0 row0" >0</th>
                        <td id="T_86d8c042_ae30_11ea_8129_d0c637cc6861row0_col0" class="data row0 col0" >[(2, 2, 3, 4)]</td>
                        <td id="T_86d8c042_ae30_11ea_8129_d0c637cc6861row0_col1" class="data row0 col1" >-31</td>
            </tr>
            <tr>
                        <th id="T_86d8c042_ae30_11ea_8129_d0c637cc6861level0_row1" class="row_heading level0 row1" >1</th>
                        <td id="T_86d8c042_ae30_11ea_8129_d0c637cc6861row1_col0" class="data row1 col0" >[(2,), (2, 3, 4)]</td>
                        <td id="T_86d8c042_ae30_11ea_8129_d0c637cc6861row1_col1" class="data row1 col1" >-15</td>
            </tr>
            <tr>
                        <th id="T_86d8c042_ae30_11ea_8129_d0c637cc6861level0_row2" class="row_heading level0 row2" >2</th>
                        <td id="T_86d8c042_ae30_11ea_8129_d0c637cc6861row2_col0" class="data row2 col0" >[(2, 2), (3, 4)]</td>
                        <td id="T_86d8c042_ae30_11ea_8129_d0c637cc6861row2_col1" class="data row2 col1" >5</td>
            </tr>
            <tr>
                        <th id="T_86d8c042_ae30_11ea_8129_d0c637cc6861level0_row3" class="row_heading level0 row3" >3</th>
                        <td id="T_86d8c042_ae30_11ea_8129_d0c637cc6861row3_col0" class="data row3 col0" >[(2, 2, 3), (4,)]</td>
                        <td id="T_86d8c042_ae30_11ea_8129_d0c637cc6861row3_col1" class="data row3 col1" >5</td>
            </tr>
            <tr>
                        <th id="T_86d8c042_ae30_11ea_8129_d0c637cc6861level0_row4" class="row_heading level0 row4" >4</th>
                        <td id="T_86d8c042_ae30_11ea_8129_d0c637cc6861row4_col0" class="data row4 col0" >[(2,), (2,), (3, 4)]</td>
                        <td id="T_86d8c042_ae30_11ea_8129_d0c637cc6861row4_col1" class="data row4 col1" >-7</td>
            </tr>
            <tr>
                        <th id="T_86d8c042_ae30_11ea_8129_d0c637cc6861level0_row5" class="row_heading level0 row5" >5</th>
                        <td id="T_86d8c042_ae30_11ea_8129_d0c637cc6861row5_col0" class="data row5 col0" >[(2,), (2, 3), (4,)]</td>
                        <td id="T_86d8c042_ae30_11ea_8129_d0c637cc6861row5_col1" class="data row5 col1" >5</td>
            </tr>
            <tr>
                        <th id="T_86d8c042_ae30_11ea_8129_d0c637cc6861level0_row6" class="row_heading level0 row6" >6</th>
                        <td id="T_86d8c042_ae30_11ea_8129_d0c637cc6861row6_col0" class="data row6 col0" >[(2, 2), (3,), (4,)]</td>
                        <td id="T_86d8c042_ae30_11ea_8129_d0c637cc6861row6_col1" class="data row6 col1" >9</td>
            </tr>
            <tr>
                        <th id="T_86d8c042_ae30_11ea_8129_d0c637cc6861level0_row7" class="row_heading level0 row7" >7</th>
                        <td id="T_86d8c042_ae30_11ea_8129_d0c637cc6861row7_col0" class="data row7 col0" >[(2,), (2,), (3,), (4,)]</td>
                        <td id="T_86d8c042_ae30_11ea_8129_d0c637cc6861row7_col1" class="data row7 col1" >-3</td>
            </tr>
    </tbody></table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can see that the combination at Row 6 has the maximum value, 9. At first glance, this seems like an easy problem. Don't let the above simple example trick you. If the array gets longer, this becomes a non-trival problem. If you'd like a challenge, I suggest that you stop here and go poke at this problem on your own. It's fun!</p>
<p>You probably understood the problem by now. Let's solve this in a naive way together first.</p>
<h2 id="The-naive-way">The naive way<a class="anchor-link" href="#The-naive-way">&#182;</a></h2><p>What I always like as my go-to first approach is to write a recursive function. I get better understanding of the problem by doing so because it lets you write things in a more stateless way (i.e. no state variables that control <code>if</code> statements everywhere) therefore it helps you formulate a math equation as the result of the process. And if you memoize the function, you can pretty go far with it, too.</p>
<p>Of course, we won't be using a recursive function for the final solution, since the stack size will be the limiting factor. But let's just go with it for now.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">adjusted</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">c</span>

<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">1024</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="o">+</span> <span class="n">adjusted</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">:</span><span class="n">i</span><span class="p">]))</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>

<span class="n">n</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="o">%</span><span class="k">time</span> f(n)
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 88 µs, sys: 0 ns, total: 88 µs
Wall time: 97 µs
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[4]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>9</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The above recursive function translates into the following equation:</p>
$$
\begin{align*}
f(0) &amp;= 0 \\
f(i) &amp;= \max_{j&lt;i}{\{f(j) + ay^2 + by + c\}} \text{, where } y = \sum_{k=1}^{j}{x_j}
\end{align*}
$$<p>This is bad because it means that we have to:</p>
<ol>
<li>Recursively call the memoized function for the previous $i$'s</li>
<li>Maximize the given equation</li>
<li>Sum the integers for each equation inside the above. (Calculate $y$)</li>
</ol>
<p>This makes our solution's time complexity $O(n^3)$.</p>
<p>Well, normally this naive approach makes me at least be able to barely pass most of the medium difficulty or even sometimes hard difficulty problems, but this time, it didn't work even for 5,000 integers. (The last test case has 1,000,000 integers...)</p>
<p>If you run the above algorithm with 1,000 integers:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">f</span><span class="o">.</span><span class="n">cache_clear</span><span class="p">()</span> <span class="c1"># clear memoized values</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data/commando_1000.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">n</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="o">*</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>

<span class="o">%</span><span class="k">time</span> f(n)
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 3.43 s, sys: 0 ns, total: 3.43 s
Wall time: 3.45 s
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[5]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>1588599</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It now takes ~4s vs. ~100µs ... Obviously, we need a better way.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="The-clever-way">The clever way<a class="anchor-link" href="#The-clever-way">&#182;</a></h2><p>So the next approach I took is to pre-calculate the partial sums of $x$ and subsituting $y$ with a term that uses the partial sums. Let's define the array of partial sums like below:</p>
$$
\begin{align*}
S_0 &amp;= 0 \\
S_i &amp;= S_{i-1} + x_i
\end{align*}
$$<p>If you have the above array pre-built, you can replace $y$ easily with the property demonstrated by the below code:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">s</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">])</span>                   <span class="c1"># sum([4, 5])</span>
<span class="n">s_prime</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">A</span><span class="p">[:</span><span class="mi">5</span><span class="p">])</span> <span class="o">-</span> <span class="nb">sum</span><span class="p">(</span><span class="n">A</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># sum([1, 2, 3, 4, 5]) - sum([1, 2, 3])</span>

<span class="n">s</span> <span class="o">==</span> <span class="n">s_prime</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[6]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The revised equation using the above is the following:</p>
$$
\begin{align*}
f(0) &amp;= 0 \\
f(i) &amp;= \max_{j&lt;i}{\{f(j) + a(S_i - S_j)^2 + b(S_i - S_j) + c\}}
\end{align*}
$$<p>Now, the summation for each iteration is gone, which makes our solution's time complexity $O(n^2)$.</p>
<p>This was the part where I was able to get to without knowing the later discussed algorithm, and I felt pretty good!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">1024</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="o">+</span> <span class="n">adjusted</span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">S</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>

<span class="n">S</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">for</span> <span class="n">x_i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="n">S</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">x_i</span><span class="p">)</span>
    
<span class="o">%</span><span class="k">time</span> f(n)
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 839 ms, sys: 4.28 ms, total: 843 ms
Wall time: 847 ms
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[7]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>1588599</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now it's ~900ms! Not bad!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="THE-way">THE way<a class="anchor-link" href="#THE-way">&#182;</a></h2><p>It's pretty good, but the above solution wasn't even close to solve it for 1,000,000 integers. Couldn't even get it to get the result no matter how long I waited... Now it's big brain time.</p>
<p><img src="https://i.imgur.com/80fn7rG.png" alt="Big Brain Time"></p>
<h3 id="The-convex-hull-trick">The convex hull trick<a class="anchor-link" href="#The-convex-hull-trick">&#182;</a></h3><p>Before getting to how it works, let's first talk about what it solves. Simply speaking, at least the way I understand it, it's <strong>a way to find the maximum value at $x$ out of all given linear functions in a constant time if some conditions are met</strong>. If your function looks like below, you can plug this in to optimize it:</p>
$$
  f(i) = g(i) + \max_{j}{\{a_j x_i + b_j \}} \text{, where } a_j &gt; 0 \text{ and } x \text{ is in ascending order}
$$<p>The $a_j x_i + b_j$ part is the linear functions given.</p>
<p>The idea of the convex hull trick is the following:</p>
<ul>
<li>The convex hull trick is basically <strong>a data structure</strong> that ...<ul>
<li>stores line functions as pairs of $(a, b)$, and</li>
<li>has two operations: <em>add line</em> and <em>query</em></li>
</ul>
</li>
<li>When you query for the value at $x$, it removes unneeded lines and gets the value from the line function that yields the maximum value. <ul>
<li>In the bottom figure, the orange line is the line that gets evaluated at $x = 0$</li>
<li>When $x \geq 3$, the orange line gets deleted because we don't need that anymore.<ul>
<li>In order to be able to do this, <strong>the order of queries made for $x_i$ needs to be in ascending order (e.g. query(x=1), query(x=2), ...)</strong>. That's why $x$ has to be in ascending order.</li>
</ul>
</li>
<li>It's basically always maintaining the line functions that return the maximum value in the given domain. If you draw only the maximum value of this collection of line functions, it looks like a lower hull of a convex hull. Hence the name, the convex hull trick.</li>
</ul>
</li>
<li>When you add a new line, it checks if the $x$ value of the intersection between the new line and the second last line is greater than the $x$ value of the intersection between the last line and the second last line.<ul>
<li>This is to check if the last line we added can be removed in lieu of the new line we're adding.</li>
<li>We can do this <strong>because with the condition $a &gt; 0$ and the order of queries is in ascending order (therefore, also the order of adding is in ascending order), we're only maintaining the right side of a lower hull (right side of the shape U)</strong>, we can easily compare the intersection points and determine that it's not needed, instead of handling all the cases for the left side of the lower hull.</li>
</ul>
</li>
</ul>
<p>By implementing the above data structure, we can only check a small number of lines (most of the time, 1 or 2) for each $\max$ loop, instead of going through all lines. Pretty awesome, isn't it? In the below figure, we'd only keep the purple line at $x = 4$, instead of checking all of them. Constant time, baby!!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered celltag_input_hidden">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">X</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="n">B</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">]</span>

<span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">b</span>

<span class="n">L</span> <span class="o">=</span> <span class="nb">list</span><span class="p">([</span><span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">X</span><span class="p">]</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">))</span>
<span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">L</span><span class="p">:</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If we implement the above description, we get the following code:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">ConvexHullTrick</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">):</span>
        <span class="c1"># Initial line</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="n">lines</span>

    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">new</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">base</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">new</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="n">top</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">base</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">base</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">top</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="n">new</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">base</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span> <span class="c1"># (1)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">break</span>

    <span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">a</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="n">c</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">d</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
            <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">b</span>
        <span class="k">return</span> <span class="kc">None</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Most of the code should make sense if you read both the above code and the idea of the convex hull trick I wrote above together. One thing I didn't cover in the above is the <code>(1)</code> part. It's basically checking the intersection of two lines, but how I arrived at it is below:</p>
<p>Let $l$, $m$ be lines as pairs of $(a, b)$.</p>
$$
\begin{align*}
  l_ax + l_b &amp;= m_ax + m_b \\
  (l_a - m_a)x &amp;= m_b - l_b \\
  x &amp;= \frac{m_b - l_b}{l_a - m_a} 
\end{align*}
$$<p>Now to get the intersections from <code>new</code> and <code>base</code> and from <code>top</code> and <code>base</code> and check if the last line needs to be removed, the equation becomes like this:</p>
<p>Let $l$, $m$, $n$ be <code>new</code>, <code>top</code>, <code>base</code>.</p>
$$
\begin{align*}
\frac{n_b - l_b}{l_a - n_a} &amp;\geq \frac{n_b - m_b}{m_a - n_a} 
\end{align*}
$$<p>Perfect! but the only problem with the above is that in computer programs, divisions will produce <code>float</code> values, or worse, sometimes in languages like C, this will do integer divisions instead. Both ways will sacrifice the precision of the comparison either slightly or greatly. We can easily avoid this uncomfortable situation by multiplying both sides by $(l_a - n_a)(m_a - n_a)$.</p>
$$
\begin{align*}
(n_b - l_b)(m_a - n_a) &amp;\leq (n_b - m_b)(l_a - n_a) 
\end{align*}
$$<p>I made it as a class so someone can just copy it and use it. 🙄 But how do we use it?</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="How-to-plug-in">How to plug in<a class="anchor-link" href="#How-to-plug-in">&#182;</a></h3><p>You might be asking, our equation doesn't look like the case where we can use the above! There are no linear functions in there!</p>
<p>Let's take a look again:</p>
$$
\begin{align*}
f(0) &amp;= 0 \\
f(i) &amp;= \max_{j&lt;i}{\{f(j) + a(S_i - S_j)^2 + b(S_i - S_j) + c\}}
\end{align*}
$$<p>If you tinker with the above equation a little bit, you can make that inside part linear functions.</p>
<p>First, expand all the parentheses and exponetials:</p>
$$
\begin{align*}
f(i) &amp;= \max_{j&lt;i}{\{f(j) + aS_i^2 - 2aS_iS_j + aS_j^2 + bS_i - bS_j + c\}} 
\end{align*}
$$<p>Then, take all the terms that don't involve $j$ out of the $\max$ since it doesn't need to be there:</p>
$$
\begin{align*}
     &amp;= \max_{j&lt;i}{\{f(j) - 2 a S_i S_j + a S_j^2 - bS_j\}} + aS_i^2 + bS_i + c
\end{align*}
$$<p>And viola! you should be able to make this look like linear functions:</p>
$$
\begin{align*}
     &amp;= \max_{j&lt;i}{\{\color{red}{(-2aS_j)} S_i + \color{blue}{(aS_j^2 - bS_j + f(j))}\}} + aS_i^2 + bS_i + c
\end{align*}
$$<p>Now we have to make sure the special conditions can be met:</p>
<ol>
<li>$-2aS_j$ is always positive because $-5\leq a \leq-1$ is given by the problem definition.</li>
<li>$S_i$ is in ascending order because $S_i$ is partial sums out of an array of positive integers ($1 \leq x \leq 100$).</li>
</ol>
<p>Therefore, our solution can be optimized by the convex hull trick. (Well, by the simpler version I learned. Apparently, there are more advanced algorithms with different restrictions.)</p>
<p>Now, the function to optimize is defined:</p>
$$
\begin{align*}
    f(i) = g(i) + \max_{j}{\{a_j x_i + b_j \}} \text{, where } &amp; a_j = -2aS_j \\
                                                               &amp; x_i = S_i \\
                                                               &amp; b_j = aS_j^2 - bS_j + f(j) \\
                                                               &amp; g(i) = aS_i^2 + bS_i + c
\end{align*}
$$<p>Let's try to solve it for 1,000 integers again first:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data/commando_1000.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">n</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="o">*</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>

<span class="n">S</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">for</span> <span class="n">x_i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="n">S</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">x_i</span><span class="p">)</span>
    
<span class="n">f</span>   <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">a_j</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">j</span><span class="p">:</span> <span class="o">-</span><span class="mi">2</span> <span class="o">*</span> <span class="n">a</span> <span class="o">*</span> <span class="n">S</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
<span class="n">b_j</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">j</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="n">S</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">b</span> <span class="o">*</span> <span class="n">S</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
<span class="n">g</span>   <span class="o">=</span> <span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="n">S</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">S</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">c</span>

<span class="k">def</span> <span class="nf">solve</span><span class="p">():</span>
    <span class="n">convhull</span> <span class="o">=</span> <span class="n">ConvexHullTrick</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">f</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">convhull</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="n">g</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="n">convhull</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">a_j</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">b_j</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="o">%</span><span class="k">time</span> solve()
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 11.5 ms, sys: 1.02 ms, total: 12.5 ms
Wall time: 11.7 ms
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[10]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>1588599</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>~900ms -&gt; 11.7ms 💪💪💪💪💪💪</p>
<p>Let's run it with 1,000,000 integers now:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data/commando_1000000.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">n</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="o">*</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>

<span class="n">f</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">S</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">for</span> <span class="n">x_i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="n">S</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">x_i</span><span class="p">)</span>

<span class="o">%</span><span class="k">time</span> solve()
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 4.24 s, sys: 22.3 ms, total: 4.26 s
Wall time: 4.28 s
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[11]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>2616046388</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://i.imgur.com/b5XAuT7.gif" alt="Magic"></p>
<p>It ran, and it finished in 4.28s!</p>
<p>I hope you find this post helpful.</p>

</div>
</div>
</div>
 


  </div>
  <script>
   // HACK: table CSS fix for pandas
   $('table').addClass('table').addClass('table-sm').addClass('table-striped').addClass('table-hover');
   $('table thead').addClass('thead-light');
  </script>
</div>
<!-- Disqus -->
<div class="container">
  <div id="disqus_thread"></div>
</div>
<script>

 /**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
 /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
  */
 (function() { // DON'T EDIT BELOW THIS LINE
   var d = document, s = d.createElement('script');
   s.src = 'https://stewartpark.disqus.com/embed.js';
   s.setAttribute('data-timestamp', +new Date());
   (d.head || d.body).appendChild(s);
 })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
  </body>
</html>